# 浅谈区块链
##### 作者：周鹏宇

### 一、对区块链的理解<br>
1.1 区块链的概念
<p>随着比特币的大火，区块链技术已经引起了业界和学术界的关注。首先，我们来谈谈什么是区块链。在Wikipedia上给出了这样的定义，他将区块链类比为一种分布式数据库技术，通过维护数据块的链式结构，可以维持持续增长的、不可篡改的数据记录。区块链技术最早的应用出现在比特币项目中，它是记录比特币交易账目历史的数据结构。</p>
1.2 区块链的基本原理
区块链包括三个基本概念:<br>
交易（transaction）：一次对账本的操作，导致账本状态的一次改变，如添加一条转账记录；<br>
区块（block）：记录一段时间内发生的所有交易和状态结果，是对当前账本状态的一次共识；<br>
链（chain）:由区块按照发生顺序串联而成，是整个账本状态变化的日志记录；<br>
<p>如果把区块链作为一个状态机，则每次交易就是试图改变一次状态，而每次共识生成的区块，就是参与者对于区块中交易导致状态改变的结果进行确认。</p><br>
   在实现上，首先假设存在一个分布式的数据记录账本，这个账本允许添加、不允许删除。账本底层的基本结构是一个线性的链表。链表由一个个“区块”串联组成（如图1所示），后继区块记录前导区块的哈希值。新的数据要加入，必须放到新的区块中。这个块是否合法，可以通过计算哈希值的方式快速检验出来。任意维护节点都可以提议一个新的合法区块，然而必须经过一定的共识机制来对最终选择的区块达成一致。<br>
   
![avatar](https://github.com/SmallNancy/trueChain/blob/master/1.png)

### 二、“去中心化”的必要性<br>
<p>现实生活中常用的纸币具备良好的可转移性，可以相对容易的完成价值交割。但是在网络的交易时代人与人之间并不认识，怎样使两个陌生的人彼此信任，并且安全高效的完成交易成了数字货币交易的一大难题。有人会想到中心化的交易模式，通过安全可靠的第三方记账机构负责记账，负责所有的担保环节，最终完成交易。下面讲解什么是中心化。</p>
2.1 什么是中心化
   现实生活中有很多中心化的例子，例如一位顾客想在淘宝上买一件商品，而买家和卖家双方相互并不信任，他们必须借助淘宝平台的第三方保证来安全可靠的完成交易。首先，买家提交订单并完成支付，此时的货款并没有支付给卖家，而是提交到了淘宝第三方保管。买家一旦收到货物并且满意，就会确认收货，此时淘宝第三方就会把货款支付给卖家。如（图 2）：<br>
   
![avatar](https://github.com/SmallNancy/trueChain/blob/master/2.png)

2.2 “去中心化”来替代中心化
<p>拿上边的例子来说吧，如果使用淘宝第三方系统，某些时候可能系统需要升级，或者系统出现网络故障，这个时候就会导致用户无法连接。再假设，有个技术黑客来侵入淘宝第三方的系统，恶意篡改系统内数据，那么所有用户的个人账户信息就会受到威胁。这个时候，就有必要去实现“去中心化”的数字货币系统。</p>

**在“去中心化”的场景下，实现数字货币存在如下几个难题**

货币的防伪：谁来负责对货币的真伪进行鉴定；<br>
货币的交易：如何确保货币从一方安全转移到另一方；<br>
避免双重支付：如何避免同一份货币支付给多个接收者。<br>
<p>可见，在“去中心化”的情况下需要实现数字货币系统的挑战着实不小。于是初链出现了，它通过POW 与 PBFT 相结合的混合共识机制在去中心化本质的同时，也能尽可能的提升效率，为问题的解决带来了一丝曙光。</p>

### 三、初链的诞生<br>
<p>根据参与者的不同，可以分为公开链、联盟链和私有链。部分私有链与联盟链已成功落地应用，让人们对公链开发者们产生了更大期望，希望商用公链的到来可以解决数字货币实现问题。公链的核心在于其共识机制的设计需要保证互不相识、不断扩充的节点能通过技术手段彼此间建立信任，并集合算力完成任务，保障公链稳定、高效地运行。现有的共识机制设计大多难于在安全性与性能间实现良好平衡。于是Eric 、Ren X 、Jesper、Felix等人首次提出了初链。</p>
3.1 初链的技术架构
<p>首先，初链采用的是混合共识机制。在主流共识设计领域中，POW共识可以实现大规模的去中心化，节点数目有公认的可扩展性，但性能较差。而以PBFT为代表的拜占庭容错协议虽然在一定条件下可以有较高的性能，但是它们通常被设计于私有场合使用，即所有节点需要在协议开始前知道相互的身份（公钥等），并且节点不能自由出入网络。初链的解决方案各取二者所长，选择了将 PBFT 的高效与 POW 的去中心化相结合的混合共识机制。其次，初链在PBFT上推出TVM。将植入每一个进行决策的主干结点，使得它们能根据单个需求进行调用请求。通过智能合约来落地应用共识机制。最后，合约抽象层将抽象智能合约中的基本商业逻辑，简化开发者设置复杂智能合约的流程。</p>
3.2 初链的优越性<br>
<p>初链保留 PBFT 记录账本的机制不动，将超级节点的选取开放给公链，共识效率得到提高，可满足高频交易量的需求。各个共识节点由业务的参与方或者监管方组成，安全性与稳定性由业务相关方保证，共识的时延大大缩减，基本达到商用实时处理的要求。同时，利用 POW 协议作为准系统支持超级节点的动态选取和协议达成，可实现完全去中心化，节点自由进出。并且将PBFT和POW共识结合在一起，解决了去中心化和性能的矛盾。与此同时，初链是全球最早的混合共识公链，在研究上和工程上都会存在诸多问题，例如在混合共识内部的边角情况处理、改善潜在的leader处理能力上遇到瓶颈，混合共识场景下的节点策略、可信的外部数据获取等等，都需要我们进一步去解决或者提出优化方案。随着初链的越来越成熟，我相信它将受到保险、医疗、游戏、公益、资产证券化、数字广告等各个行业的青睐。</p>

